* D:\transistorComputer\CMOS\Test_DFF.asc
XX1 A VDD Q CLK !Q dff

* block symbol definitions
.subckt dff D VDD Q CLK !Q
XX2 D NC_01 N004 gate_not_dff
XX1 CLK VDD N002 gate_not_slow
XX3 D N002 N001 VDD CLK gate_nand_dff[3]
XX4 N002 N004 N003 VDD CLK gate_nand_dff[3]
XX5 N001 !Q Q VDD gate_nand_dff
XX6 N003 Q !Q VDD gate_nand_dff
.ends dff

.subckt gate_not_dff A VDD !A
M1 !A A 0 0 myNMOS w=.3u L=100u
M2 !A A VDD VDD myPMOS W=2u L=100u
.model myNMOS NMOS (LEVEL=7 TOX=8e-9 U0 = 1300
+CGSO=3.4E-10 CGDO=3.4E-10 CJ=6.8e-4 CJSW=1.26e-10
+MJ=0.5 MJSW=0.5 CGBO=5.75E-10 RSH=33.8)
.model myPMOS PMOS (LEVEL=7 TOX=8e-9 CGDO=5.3752E-11
+U0= 440 CGSO=5.3752E-11 CGBO=3.3650E-10 CJ=4.8447E-04
+MJ=0.5027 CJSW=1.6457E-10 MJSW=0.217168 RSH=29.8)
.inc Mod_W2017N.mod
.ends gate_not_dff

.subckt gate_not_slow A VDD !A
M1 !A A 0 0 myNMOS w=.1u L=500u
M2 !A A VDD VDD myPMOS W=2u L=100u
.inc Mod_W2017N.mod
.ends gate_not_slow

.subckt gate_nand_dff[3] A C Out VDD B
M1 Out A N001 N001 RIT4007N7
M4 Out A VDD VDD RIT4007P7
M5 Out B VDD VDD RIT4007P7
M2 N001 B P001 P001 RIT4007N7
M§3 P001 C 0 0 RIT4007N7
M3 Out C VDD VDD RIT4007P7
.inc CD4007.mod
.ends gate_nand_dff[3]

.subckt gate_nand_dff A B Out VDD
M1 Out A N001 N001 myNMOS W=myW L=myL
M2 Out A VDD VDD myPMOS W=myW L=myL
M3 Out B VDD VDD myPMOS W=myW L=myL
M4 N001 B 0 0 myNMOS W=myW L=myL
.param myW=.1u
.inc Mod_W2017N.mod
.param myL=500u
.ends gate_nand_dff

.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\john\Documents\LTspiceXVII\lib\cmp\standard.mos
.tran 17m
.inc Test_input_DFF.txt
.backanno
.end
