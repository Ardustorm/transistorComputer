* D:\transistorComputer\CMOS\Test_ALU_ADD_MUL.asc
XX1 A[0] A[1] A[2] A[3] NC_01 NC_02 NC_03 NC_04 NC_05 B[0] B[1] B[2] B[3] NC_06 NC_07 NC_08 NC_09 NC_10 C VDD Out[0] Out[1] Out[2] Out[3] Out[4] Out[5] Out[6] Out[7] Out[8] alu_add_mul

* block symbol definitions
.subckt alu_add_mul A[0] A[1] A[2] A[3] A[4] A[5] A[6] A[7] A[8] B[0] B[1] B[2] B[3] B[4] B[5] B[6] B[7] B[8] C VDD Out[0] Out[1] Out[2] Out[3] Out[4] Out[5] Out[6] Out[7] Out[8]
XX1 A[0] A[1] A[2] A[3] VDD SUM[0] SUM[1] SUM[2] SUM[3] B[0] B[1] B[2] B[3] SUM[4] rca[4]
XX2 A[0] A[1] A[2] A[3] VDD Prod[0] Prod[1] Prod[2] Prod[3] Prod[4] Prod[5] Prod[6] Prod[7] B[0] B[1] B[2] B[3] multiplier[4]
XX3 SUM[0] SUM[1] SUM[2] SUM[3] SUM[4] SUM[5] SUM[6] SUM[7] SUM[8] Prod[0] Prod[1] Prod[2] Prod[3] Prod[4] Prod[5] Prod[6] Prod[7] Sum[5:8] C VDD Out[0] Out[1] Out[2] Out[3] Out[4] Out[5] Out[6] Out[7] Out[8] mux[9]
R1 Sum[5] 0 .001
.ends alu_add_mul

.subckt rca[4] A[0] A[1] A[2] A[3] VDD SUM[0] SUM[1] SUM[2] SUM[3] B[0] B[1] B[2] B[3] Co
XX1 A[0] VDD Sum[0] B[0] N003 half_adder
XX2 A[1] VDD Sum[1] B[1] N002 N003 full_adder
XX3 A[2] VDD Sum[2] B[2] N001 N002 full_adder
XX4 A[3] VDD Sum[3] B[3] Co N001 full_adder
.ends rca[4]

.subckt multiplier[4] A[0] A[1] A[2] A[3] VDD Prod[0] Prod[1] Prod[2] Prod[3] Prod[4] Prod[5] Prod[6] Prod[7] B[0] B[1] B[2] B[3]
XX1 A[0] B[3] N001 VDD gate_and
XX2 A[0] B[2] N002 VDD gate_and
XX3 A[0] B[1] N003 VDD gate_and
XX4 A[0] B[0] Prod[0] VDD gate_and
XX5 A[1] B[3] N004 VDD gate_and
XX6 A[1] B[2] N005 VDD gate_and
XX7 A[1] B[1] N006 VDD gate_and
XX8 A[1] B[0] N007 VDD gate_and
XX9 N003 VDD Prod[1] N007 N008 half_adder
XX10 N002 VDD N011 N006 N014 N008 full_adder
XX11 N001 VDD N010 N005 N012 N014 full_adder
XX13 A[2] B[3] N015 VDD gate_and
XX14 A[2] B[2] N016 VDD gate_and
XX15 A[2] B[1] N017 VDD gate_and
XX16 A[2] B[0] N018 VDD gate_and
XX17 A[3] B[3] PB[3] VDD gate_and
XX18 A[3] B[2] PB[2] VDD gate_and
XX19 A[3] B[1] PB[1] VDD gate_and
XX20 A[3] B[0] PB[0] VDD gate_and
XX21 PA[0] PA[1] PA[2] PA[3] VDD Prod[3] Prod[4] Prod[5] Prod[6] PB[0] PB[1] PB[2] PB[3] Prod[7] rca[4]
XX22 N011 VDD Prod[2] N018 N019 half_adder
XX23 N010 VDD PA[0] N017 N021 N019 full_adder
XX24 N009 VDD PA[1] N016 N020 N021 full_adder
XX12 N004 VDD N009 N012 N013 half_adder
XX25 N013 VDD PA[2] N015 PA[3] N020 full_adder
.ends multiplier[4]

.subckt mux[9] A[0] A[1] A[2] A[3] A[4] A[5] A[6] A[7] A[8] B[0] B[1] B[2] B[3] B[4] B[5] B[6] B[7] B[8] C VDD Out[0] Out[1] Out[2] Out[3] Out[4] Out[5] Out[6] Out[7] Out[8]
XX1 A[0] B[0] C VDD Out[0] mux
XX2 A[1] B[1] C VDD Out[1] mux
XX3 A[2] B[2] C VDD Out[2] mux
XX4 A[3] B[3] C VDD Out[3] mux
XX5 A[4] B[4] C VDD Out[4] mux
XX6 A[5] B[5] C VDD Out[5] mux
XX7 A[6] B[6] C VDD Out[6] mux
XX8 A[7] B[7] C VDD Out[7] mux
XX9 A[8] B[8] C VDD Out[8] mux
.ends mux[9]

.subckt half_adder A VDD SUM B C
XX4 A B SUM VDD gate_xor
XX5 B A C VDD gate_and
.ends half_adder

.subckt full_adder A VDD SUM B Co C
XX9 A B N001 VDD gate_xor
XX10 N001 C SUM VDD gate_xor
XX1 A B N002 VDD gate_and
XX2 A C N004 VDD gate_and
XX3 B C N005 VDD gate_and
XX4 N002 N004 N003 VDD gate_or
XX5 N003 N005 Co VDD gate_or
.ends full_adder

.subckt gate_and A B Out VDD
XX3 A B N001 VDD gate_nand
XX4 N001 VDD Out gate_not
.ends gate_and

.subckt mux A B C VDD Out
XX1 B C N001 VDD gate_and
XX3 A N003 N002 VDD gate_and
XX4 C VDD N003 gate_not
XX5 N001 N002 Out VDD gate_or
.ends mux

.subckt gate_xor A B Out VDD
M1 Out A N003 N003 RIT4007N7
M2 Out N002 P001 P001 RIT4007P7
M3 Out N001 P002 P002 RIT4007P7
M4 N003 N001 0 0 RIT4007N7
M5 N003 B 0 0 RIT4007N7
M6 Out N002 N003 N003 RIT4007N7
M7 P002 B VDD VDD RIT4007P7
M8 P001 A VDD VDD RIT4007P7
XX1 A VDD N001 gate_not
XX4 B VDD N002 gate_not
.inc CD4007.mod
.ends gate_xor

.subckt gate_or A B Out VDD
M1 Out N001 N002 N002 RIT4007N7
M2 Out N001 VDD VDD RIT4007P7
M3 Out N003 VDD VDD RIT4007P7
M4 N002 N003 0 0 RIT4007N7
XX3 A VDD N001 gate_not
XX4 B VDD N003 gate_not
.inc CD4007.mod
.ends gate_or

.subckt gate_nand A B Out VDD
M1 Out A N001 N001 RIT4007N7
M2 Out A VDD VDD RIT4007P7
M3 Out B VDD VDD RIT4007P7
M4 N001 B 0 0 RIT4007N7
.inc CD4007.mod
.ends gate_nand

.subckt gate_not A VDD !A
M1 !A A 0 0 RIT4007N7
M2 !A A VDD VDD RIT4007P7
.inc CD4007.mod
.ends gate_not

.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\John\Documents\LTspiceXVII\lib\cmp\standard.mos
.tran 1024m
.inc Test_inputA[9]B[9]C.txt
.backanno
.end
